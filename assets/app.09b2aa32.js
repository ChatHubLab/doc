import{d as C,o as u,c as p,k as r,t as g,e as B,r as w,g as R,h as _,x as S,j as P,a3 as $,N as x,n as D,a4 as T,s as y,a5 as M,a6 as V,a7 as j,a8 as z,a9 as N,aa as O,ab as U,ac as F,ad as I,ae as H,X as q,u as G,y as X,af as J,ag as K,ah as Q,ai as W}from"./chunks/framework.c13351f1.js";import{t as Y}from"./chunks/theme.5d13ca96.js";const Z={class:"chat-panel"},ee={key:0,class:"controls"},te=r("div",{class:"circle red"},null,-1),ae=r("div",{class:"circle yellow"},null,-1),ne=r("div",{class:"circle green"},null,-1),se={class:"title"},oe={class:"content"},re=C({__name:"ChatPanel",props:{controls:{type:Boolean,default:!0},title:{default:"聊天记录"}},setup(e){const t=e;return(a,s)=>(u(),p("div",Z,[t.controls?(u(),p("div",ee,[te,ae,ne,r("div",se,g(t.title),1)])):B("",!0),r("div",oe,[w(a.$slots,"default")])]))}});const ce=["src"],le={class:"nickname"},ie={class:"message-box"},ue=C({__name:"ChatMessage",props:{nickname:{},color:{},avatar:{}},setup(e,{expose:t}){const a={Alice:"#cc0066",Bot:"#00994d",User:"#1e90ff",Dave:"#f4a460"},s=R(()=>c.color||a[c.nickname[0].toLocaleUpperCase()+c.nickname.slice(1).toLocaleLowerCase()]),c=e,d=_(!1),k=_(!1),m=_(!1),f=_();function L(){let n;for(const o of document.querySelectorAll(".chat-message")){if(o===f.value)return n;n=o}}S(k,n=>{if(!n)return d.value=!1;const o=L();if(!o||o.getBoundingClientRect().bottom<0)return v();const h=o.__vue__.exposed;h.moving.value||!h.shown.value?h.onappear(v):v()});let A=()=>{};function v(){d.value=!0,m.value=!0,setTimeout(()=>{m.value=!1,A()},100)}function i(){f.value.getBoundingClientRect().top<innerHeight&&(k.value=!0)}const b=T();return t({moving:m,shown:d,onappear(n){A=n}}),P(()=>{f.value.__vue__=b,i(),addEventListener("scroll",i),addEventListener("resize",i)}),$(()=>{removeEventListener("scroll",i),removeEventListener("resize",i)}),(n,o)=>(u(),p("div",{ref_key:"root",ref:f,class:D(["chat-message",{shown:d.value}])},[n.avatar?(u(),p("img",{key:0,class:"avatar",src:n.avatar},null,8,ce)):(u(),p("div",{key:1,class:"avatar",style:x({backgroundColor:s.value})},g(n.nickname[0]),5)),r("div",le,g(n.nickname),1),r("div",ie,[w(n.$slots,"default")])],2))}});const pe={Layout:Y.Layout,enhanceApp({app:e}){e.component("chat-panel",re),e.component("chat-message",ue)}};function E(e){if(e.extends){const t=E(e.extends);return{...t,...e,async enhanceApp(a){t.enhanceApp&&await t.enhanceApp(a),e.enhanceApp&&await e.enhanceApp(a)}}}return e}const l=E(pe),de=C({name:"VitePressApp",setup(){const{site:e}=G();return P(()=>{X(()=>{document.documentElement.lang=e.value.lang,document.documentElement.dir=e.value.dir})}),J(),K(),Q(),l.setup&&l.setup(),()=>W(l.Layout)}});async function fe(){const e=_e(),t=ve();t.provide(V,e);const a=j(e.route);return t.provide(z,a),t.component("Content",N),t.component("ClientOnly",O),Object.defineProperties(t.config.globalProperties,{$frontmatter:{get(){return a.frontmatter.value}},$params:{get(){return a.page.value.params}}}),l.enhanceApp&&await l.enhanceApp({app:t,router:e,siteData:U}),{app:t,router:e,data:a}}function ve(){return F(de)}function _e(){let e=y,t;return I(a=>{let s=H(a),c=null;return s&&(e&&(t=s),(e||t===s)&&(s=s.replace(/\.js$/,".lean.js")),c=q(()=>import(s),[])),y&&(e=!1),c},l.NotFound)}y&&fe().then(({app:e,router:t,data:a})=>{t.go().then(()=>{M(t.route,a.site),e.mount("#app")})});export{fe as createApp};
